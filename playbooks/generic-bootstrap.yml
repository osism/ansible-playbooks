---
- name: Gather facts for all hosts
  hosts: manager
  gather_facts: false
  tasks:
    - name: Gathers facts about remote hosts
      setup:

- import_playbook: generic-hostname.yml

- import_playbook: generic-hosts.yml

- import_playbook: generic-proxy.yml

- import_playbook: generic-resolvconf.yml

- import_playbook: generic-repository.yml

- import_playbook: generic-rsyslog.yml

- name: Apply role common
  hosts: all
  serial: "{{ osism_serial['common']|default(osism_serial_default)|default(0) }}"

  roles:
    - role: osism.common
      tags: common

- import_playbook: generic-grub.yml

- import_playbook: generic-timezone.yml

- import_playbook: generic-utilities.yml

- import_playbook: generic-docker.yml

- import_playbook: generic-cockpit.yml

- import_playbook: generic-chrony.yml

- import_playbook: generic-hardening.yml

- import_playbook: generic-auditd.yml
